# 三国杀模拟器版本更新日志

## V7.4.0.61（2025/8/27）
- 新增**面杀随机标记**的网页以及入口
  - 目前支持**李傕**的技能“**狼袭**”和**徐荣**的技能“**凶镬**”技能随机效果。三个效果都是平分概率33.33%
  - 该页面可单独下载使用，可脱离head.css单独使用，只会令页头页尾以及回到顶部的css失效，不会影响其他效果
  - 页面顶部有对应导航栏，日后更新其他标记时若过长可一键直达
  - 为了方便移动端使用标记页面，在页面右上角有一个额外的导航栏
  - 日后会支持更多其他武将的随机技能标记
  - 这里的测试区域没有任何作用，只做检索功能测试使用，下次更新这个页面会将其删除
- 细节优化：
  - 将面杀小标记页面的导航栏在小页面/超小页面里取消置顶，正常大屏幕置顶。（随机标记页面同）。取而代之的是移动端专属的右上角菜单栏。
  - 小页面/超小页面会隐藏掉原本的“返回主页”按钮，转到移动端专属的右上角菜单栏里。（随机标记页面相同）

## V7.3.0.61（2025/8/26）
- 新增**大宝模拟器**的网页以及入口
  - 界徐盛的技能简化为：默认所有杀的伤害基数+1（杀，雷杀为2，火杀为3）
  - 大宝模拟器特有：
    - 一次性造成3点伤害时，会有“癫狂屠戮”的动画和音效
    - 一次性造成4点或更多伤害时，会有“无双，万军取首”的动画和音效
    - 在操作台上可以打开或关闭动画和音效，这个功能是默认打开的。
    - 当发现【杀】在开始游戏时被禁用，刷新网页或结束出牌阶段即可。这个是概率的问题，我也不知道问题出在哪里了。
- 新增**面杀小标记**的网页以及入口，这个网页可以为面杀提供一些便利。
  - 目前支持**张让**的“**滔乱**”技能，和**神荀彧**“**定汉**”技能的标记，以及一个测试窗口（可用作备用），这个测试窗口提供1-10共10个数字标记位
  - 点击“**展开/收起**”按钮可展开/收起对应模块
  - 点击“**一键重置所有区域**”或“**一键重置**”会重置全部区域的标记或对应模块的标记
  - 该日后会支持更多其他武将的技能标记
  - 该页面可单独下载使用，可脱离head.css单独使用，只会令页头页尾以及回到顶部的css失效，不会影响其他效果
  - 页面顶部有对应导航栏，日后更新其他标记时若过长可一键直达
  - 为了方便移动端使用标记页面，在页面右上角有一个额外的导航栏
- 将**大宝模拟器**以及**无技能版模拟器**初始桃可用次数从1调整为0（因为界沮授开局少1滴血的缘故）

## V7.2.0.61 （2025/8/25）
- 新增了以下武器牌的作用：
  - **【雌雄双股剑】**：简化后，默认对手是异性且选择让你摸一张牌
  - **【古锭刀】**：简化后，默认对手没有手牌，【**杀**】伤害+1
  - 【丈八蛇矛】的作用：
     - 装备【丈八蛇矛】后，会在“手牌”上新增一个“丈八”按钮，卸掉武器后会消失
     - 点击后按钮后，可选取两张手牌当做【杀】使用
     - 这张【杀】会被记录为空
     - 当出现无法选择卡牌时，请点击取消按钮重新点一次。（这通常会出现在刚上丈八后第一次出杀或新的回合开始）
     - 当出【杀】次数达到上限时，无法点击按钮
 - 【朱雀羽扇】：令普通【杀】变成【火杀】（伤害系数+1）
 - 说明：至此，所有武器牌乃至全部游戏卡牌（不含扩展）的作用都已经写完了。【寒冰剑】，【贯石斧】，【麒麟弓】，【方天画戟】和【青釭剑】以及防具，坐骑牌由于简化后的作用于单人模拟没有什么用处，因此不做对应效果代码补充
 - 单机版同步
   - 联机版V7.2.0.61的所有内容
   - 至此，由于所有卡牌作用都写完了。受限于单机版的文件限制，单机版现在是正式停更的状态了，除非日后发现卡牌有什么使用上的bug会同步修复补丁外，V6.1将会是单机版最终的版本号

## V7.1.0.60 （2025/8/24）
- 新增了【青龙偃月刀】的完整流程：
    - 当使用【杀】时，呼出弹窗检索手牌中所有的【杀】
    - 在【青龙偃月刀】插入结算使用的【杀】不计入出杀次数上限
    - 只有第一张（触发【青龙偃月刀】之前的【杀】享受到【酒】的伤害加成）
    - 无论是否选择继续出【杀】，通过【青龙偃月刀】使用的【杀】均会检索技能渐营
    - 无论是否选择继续出【杀】，最终结算【杀】的伤害系数永远是最后一张【杀】的种类
- 在手牌区旁边新增一个小的记录上一张使用手牌的详细信息
- 单机版同步
    - 同步了联机版V7.1.0.60的所有内容

## V7.0.1.57 （2025/8/22）
- 修复了【火攻】的使用错误问题
- 单机版同步：
     - 同步修复【火攻】的使用错误问题

## V7.0.0.56 (2025/8/22)
- 新增了无技能模拟器的网页以及入口
- 预告：
     - 决定了接下来会逐渐补全其他装备的代码
     - 新增的这个无技能的纯净版的网页，是为了日后方便添加其他简单的武将技能代码

## V6.5.0.56 （2025/8/21）
- 新增无懈可击卡牌完整结算流程：
  - 当使用锦囊牌时自动触发无懈可击检测
  - 弹出交互式对话框显示可用的无懈可击牌
  - 支持多张无懈可击连锁使用（偶数张生效，奇数张失效）
  - 无懈可击使用后自动触发渐营技能检查
- 实现**火攻**卡牌完整交互流程：
  - 目标选择阶段（自己/他人）
    - 对自己使用时可选择：
      - 结束结算（无事发生）
      - 弃置手牌（桃可用次数+1）
    - 对他人使用时：
      - 从牌堆顶亮出1张牌
      - 可选择弃置同花色手牌（回合伤害+1）
    - 火攻使用后自动触发渐营技能
- 新增**整理手牌**功能：
  - 明确排序优先级规则：诸葛连弩→杀→酒→锦囊牌→装备牌→桃→闪→无懈可击
  - 添加3秒操作冷却防止误触
- 单机版同步：
  - 同步了以上所有内容

## V6.4.0.55 （2025/8/20）
- 修复与优化：
  - 优化了**状态信息区**的排布
  - 修复了【**杀**】与【**诸葛连弩**】的错误使用关系（原本卸掉诸葛连弩后杀会错误计数），并使用新的，更详细的计数方式
  - 为状态信息区添加展开与收起按钮
- 新增**状态信息区**内的伤害显示，伤害数据如下：
  - 【**杀**】，【**雷杀**】的基础伤害为**1**
  - 【**火杀**】的基础伤害为**2**
  - 【**酒**】可使下一张【**杀**】的伤害+**1**
- 新增以下卡牌的作用
  - 【**南蛮入侵**】、【**万箭齐发**】的伤害为**2**
  - 【**决斗**】的作用：
    - 不断打出【**杀**】，但【**杀**】不检索技能
    - 【**桃**】可用次数+**1**
    - 伤害数值+**1**
- 单机版同步：
  - 同步了以上所有内容

## V6.3.1.54 (2025/8/19）
-在主页新增了GitHub下载完整ZIP直链的按钮

## V6.3.0.54 (2025/8/18)
- 新增【**过河拆桥**】卡牌完整功能：
  - 当状态区有【**兵粮寸断**】或【**乐不思蜀**】时使用过河拆桥会弹出选择框
  - 可选择**拆除一张延时锦囊**或仅使用效果
  - 无论选择如何都会触发**渐营技能**检查
- 新增【**顺手牵羊**】卡牌完整功能：
  - 当状态区有延时锦囊时使用顺手牵羊会弹出选择框
  - 可选择**获取一张延时锦囊**到手牌或仅摸一张牌
  - 无论选择如何都会触发**渐营技能**检查
- 修复**延时锦囊牌使用时不触发技能**问题：
  - 使用【**兵粮寸断**】、【**乐不思蜀**】或【**闪电**】时会正确检查**渐营技能**并触发额外摸牌效果
- 单机版代码同步：
  - 同步了过河拆桥和顺手牵羊的完整功能实现
  - 同步了延时锦囊牌触发技能的修复
- 将更新日志从**正序**调整为**倒序**排列

## V6.2.1.53 (2025/8/15)
- 移除了【**五谷丰登**】的取消按钮，以修复点击取消后无法正确触发渐营的问题
- 单机版代码同步：
  - 同步了移除【**五谷丰登**】的取消按钮代码

## V6.2.0.52 (2025/8/14)
- 增加延时锦囊牌作用：
  - 【**兵粮寸断**】、【**乐不思蜀**】使用上限为2张，超过则禁用。回合结束后清空
  - 【**闪电**】使用上限为1张，超过则禁用。回合结束后清空
- 单机版代码同步：
  - 同步了延时锦囊牌的作用

## V6.1.3.51 (2025/8/10)
- 修复主页里`<div class="main-content">`缺少闭合标签导致`</body>`报错的问题

## V6.1.2.51 (2025/8/8)
- 修复页尾按钮在页面过窄时会捅出界面的问题（≥768px或≥480px）

## V6.1.1.51 (2025/8/7)
- 新增页尾处**GitCode**链接按钮
- 新增卡牌【**五谷丰登**】作用：从牌堆顶翻开三张牌，选择其中一张加入手牌
- 单机版代码同步：
  - 卡牌【**顺手牵羊**】作用同步至单机版
  - 优化后的牌堆数组同步至单机版
  - 卡牌【**五谷丰登**】作用同步至单机版
  - 删除单机版**洗牌性能测试**按钮及其代码
- 新版本号定义（以V6.1.1.51为例）：
  - X+1：大版本更新（如V5.0重构页面，V6.0红利期算法更新），Y/Z清0
  - Y+1：小版本更新（新增次要功能），Z清0
  - Z+1：微小更新（修复bug/优化代码）
  - AA：单机版版本号（十位=X版本，个位=Y版本）
  - XYZ始终为主模拟器版本号，AA只代表单机版

## V6.1 (2025/8/3)
- 新增【**顺手牵羊**】卡牌作用：使用时额外从牌堆顶摸1张牌
- 紧急调整红利期算法：
  - 牌堆顶定义改为：牌堆顶**10张牌**​（第5~14张）
  - 牌堆底定义改为：牌堆倒数**10张牌**​
  - 修改原因：增加牌堆随机性（61张牌已占牌堆约38%）

## V6.0 (2025/8/2)
- 删除**随机版的性能测试按钮**及对应js代码（减少约100行代码）
- 新增**沮爹模拟器红利期算法版本**​：
  - 将**诸葛连弩**锁定在手牌第一张
  - 红利牌/黑利牌洗牌机制：
    - ​**红利牌**​（无中生有/顺手牵羊/过河拆桥）：90%几率出现在牌堆顶
    - ​**黑利牌**​（闪/桃/其他武器牌）：90%几率出现在牌堆底
    - 其他卡牌随机插入空位
    - 牌堆顶定义：开局4张牌外第5~34张
    - 牌堆底定义：倒数30张牌
    - 非100%概率保证，模拟真实红利期牌堆
    - 删除脚气卡功能
- 新增核心洗牌对比代码页面

## V5.4 (2025/7/31)
- CSS性能优化：
  - 删除冗余CSS规则（减少约200行代码）
- 关键问题修复：
  - 修正**header占位符**拼写错误（影响3个核心页面）
- 维护性提升：
  - 实现CSS规则**100%利用率**​（消除未使用样式）
  - 增加**移动端响应式备用高度**方案
- 为所有页面添加**​"回到顶部"​**按钮
- 为所有历史版本添加**更新时间**​
- 优化牌堆数组（代码量284行→244行）

## V5.3 (2025/7/30)
- 修复页尾**bilibili和github按钮**长短不一问题
- 将**单机版V5.0代码开源**并支持复制粘贴运行
- 统一**非模拟器页面顶部CSS**​

## V5.2 (2025/7/20)
- 因gitee封号，​**单机版停止更新**​
- 新增**五国语言MIT LICENSE页面**​
- 统一版本号到主页部分

## V5.1 (2025/7/16)
- 重新给模拟器页面添加全面**注释**​
- 更新**开源教学网页**​

## V5.0 (2025/6/29)
- ​**重构整个页面文件**​（脱离本地化，接入GitHub Pages）
- 计划开发其他武将摸牌模拟器
- 分离css样式/牌堆js代码（大幅减小文件体积）
- 修复点击非"添加指定牌"却弹出对应窗口的bug

## V4.2 (2025/5/24)
- 新增**洗牌均匀性测试窗口**重新测试按钮
- 完善洗牌均匀性测试计算公式
- 优化洗牌均匀性测试窗口排序
- 针对**移动端**CSS优化
- 修复最左侧更新信息弹窗被遮挡问题
- 修复【**借刀杀人**】相关bug

## V4.1 (2025/5/18)
- 修复【**桃园结义**】导致桃使用次数为-1的bug
- 修复**AES展开时按钮显示不完全**问题
- 将锦囊牌细分为**普通锦囊牌/延时锦囊牌**​
- 优化浏览器窗口过小时内容遮挡问题
- 删除旧的**脚气卡计数器**显示
- 增加**十万次随机洗牌**功能及诸葛连弩概率提示

## V4.0 (2025/5/1)
- 获取**MIT License开源许可**​

## V3.3 (2025/5/1)
- 新增**操作台快捷键**​
- 新增卡牌功能：
  - 【**借刀杀人**】：检索武器牌/使用闪或增加桃使用次数
  - 常态禁用【**无懈可击**】使用
  - 【**桃园结义**】：-1次桃可用次数
- 新增测试功能：​**手动添加指定牌**到手牌区
- 删除记牌器图片（代码过长过大）

## V3.2 (2025/4/24)
- 新增卡牌功能：
  - 【**无中生有**】：额外摸两张牌
  - 【**铁索连环**】：重铸摸牌或检索花色点数
  - 【**杀**】：使用次数限制（默认2次）
  - 【**诸葛连弩**】：解除杀使用限制
  - 【**桃**】【**酒**】：正确使用次数（界沮授开局少1血）
  - 常态禁用【**闪**】使用
- 新增**状态信息区**​

## V3.1 (2025/4/9)
- 新增**MD5码**生成与校检
- 新增**结束出牌阶段**按钮
- 新增**AES编码**生成/校检（绑定MD5，可解码分享内容）
- 新增**牌堆日志**生成（仅支持Windows）
- 记牌器区域添加沮授背景图

## V3.0 (2025/4/6)
- 新增**模拟出牌阶段**​
- 添加**标沮授技能代码**​
- 刷新牌堆自动发**4张牌**​
- 优化牌堆代码（大幅减少臃肿度）
- 新增**日志区**​
- 新增**展开/收起记牌器**按钮
- 新增**刷新网页**按钮
- 采用新**牌堆随机代码**​（更安全接近真随机）
- 修复牌堆花色格式导致**渐营无法触发**问题

## V2.1 (2025/3/25)
- 新增**脚气卡**功能（发牌=4张且洗牌<7次可用）
- 优化更新内容排版
- 优化**基锦装**组合代码
- 添加完整注释（F12查看学习）

## V2.0 (2025/3/21)
- 新增**记牌器**显示
- 补全牌堆遗漏的**5张酒**​
- 新增**抽到AK提示**​
- 优化并置顶**交互按钮**​

## V1.0 (2025/3/18)
- 基础功能：
  - 抽1-4张牌
  - 洗牌功能
  - 查看剩余牌堆
